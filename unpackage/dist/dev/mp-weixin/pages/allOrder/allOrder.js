(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/allOrder/allOrder"],{263:function(e,t,r){"use strict";(function(e,t){var n=r(4);r(26);n(r(25));var l=n(r(264));e.__webpack_require_UNI_MP_PLUGIN__=r,t(l.default)}).call(this,r(1)["default"],r(2)["createPage"])},264:function(e,t,r){"use strict";r.r(t);var n=r(265),l=r(267);for(var o in l)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return l[e]}))}(o);r(269);var i,a=r(35),c=Object(a["default"])(l["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],i);c.options.__file="pages/allOrder/allOrder.vue",t["default"]=c.exports},265:function(e,t,r){"use strict";r.r(t);var n=r(266);r.d(t,"render",(function(){return n["render"]})),r.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),r.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),r.d(t,"components",(function(){return n["components"]}))},266:function(e,t,r){"use strict";var n;r.r(t),r.d(t,"render",(function(){return l})),r.d(t,"staticRenderFns",(function(){return i})),r.d(t,"recyclableRender",(function(){return o})),r.d(t,"components",(function(){return n}));var l=function(){var e=this,t=e.$createElement,r=(e._self._c,""!=e.selectAllOrdedel?e.__map(e.selectAllOrdedel,(function(t,r){var n=e.__get_orig(t),l=(t.price/100).toFixed(2);return{$orig:n,g0:l}})):null),n=""!=e.selectOrdedel?e.__map(e.selectOrdedel,(function(t,r){var n=e.__get_orig(t),l=(t.price/100).toFixed(2);return{$orig:n,g1:l}})):null,l=""!=e.selectOrdedel?e.__map(e.selectOrdedel,(function(t,r){var n=e.__get_orig(t),l=(t.price/100).toFixed(2);return{$orig:n,g2:l}})):null,o=""!=e.selectOrdedel?e.__map(e.selectOrdedel,(function(t,r){var n=e.__get_orig(t),l=(t.price/100).toFixed(2);return{$orig:n,g3:l}})):null,i=""!=e.selectOrdedel?e.__map(e.selectOrdedel,(function(t,r){var n=e.__get_orig(t),l=(t.price/100).toFixed(2);return{$orig:n,g4:l}})):null;e.$mp.data=Object.assign({},{$root:{l0:r,l1:n,l2:l,l3:o,l4:i}})},o=!1,i=[];l._withStripped=!0},267:function(e,t,r){"use strict";r.r(t);var n=r(268),l=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=l.a},268:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=getApp(),n={data:function(){return{curr:0,active:0,taber:["全部","待付款","待收货","待评价","已完成"],myDeal:[],selectOrdedel:[],flag:null,selectAllOrdedel:[],currs:null,total:null,page:0,list:null,button:"",userInfo:{},pageNum:1,pageNumAllOrder:1,timer:null,timerAll:null}},watch:{curr:function(e,t){this.pageNum=1,this.pageNumAllOrder=1,this.selectOrdedel=[],this.selectAllOrdedel=[]}},methods:{OrderDetails:function(t){e.showToast({title:"暂未开放，敬请期待",icon:"none"})},getAllOrder:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;this.selectAllOrdedel.length!==this.total||null===this.total?r.globalData.selectAllOrder({pageNum:n,pageSize:l,userId:this.userInfo.id}).then((function(r){if(void 0!==r.data){t.pageNumAllOrder++,t.total=r.data.total;var l=r.data.records.length;t.selectAllOrdedel=t.selectAllOrdedel.concat(t.dataHandle(r.data.records,l)),console.log("^^^^^^^^^^^^^^^^^^^^^^^^^"),console.log(r.data.records),console.log(t.selectAllOrdedel)}else 1===n?e.showToast({title:"还没有订单哦",icon:"none"}):e.showToast({title:"没有数据了哦~",icon:"none"})})).catch((function(t){e.showToast({title:t.message,icon:"error"})})):(e.hideLoading(),this.button="到底了~")},deletedeal:function(e){this.flag==e?this.flag=null:this.flag=e},deleteOrder:function(t){this.flag=null;var n=this;e.showModal({title:"删除订单",content:"确定删除该订单吗？",showCancel:!0,success:function(l){var o=this;l.confirm?r.globalData.deleteOrder({id:t,userId:n.userInfo.id}).then((function(t){console.log(t,"res----"),e.redirectTo({url:"/pages/allOrder/allOrder?userId="+o.userInfo.id}),console.log("删除成功")})).catch((function(e){console.log(e,"err----")})):l.cancel&&console.log("删除失败")}})},setCurr:function(e){var t=this;this.curr=e.detail.current||e.currentTarget.dataset.index||0,this.page=1,this.timer||(console.log("******************"),this.timer=setTimeout((function(){t.getSelectOrderr(),t.timer=null}),50)),0===this.curr&&(this.timerAll||(this.timerAll=setTimeout((function(){t.getAllOrder(),t.timerAll=null}),50)))},toBack:function(){e.navigateBack({delta:1})},getSelectOrderr:function(){var t=this;this.currs=this.curr-1,r.globalData.selectOrderByStatus({userId:this.userInfo.id,status:this.currs,pageNum:this.pageNum,pageSize:6}).then((function(e){if(void 0!=e.data.records){var r=e.data.records.length;t.pageNum++,t.selectOrdedel=t.selectOrdedel.concat(t.dataHandle(e.data.records,r)),console.log("__________________________"),console.log(e.data.records),console.log(t.selectOrdedel)}})).catch((function(t){e.showToast({title:t.message,icon:"error"})}))},dataHandle:function(e,t){for(var r=e.length-t;r<e.length;r++)e[r].goodsImg=JSON.parse(e[r].goodsImg)[0],e[r].expireTime&&(e[r].expireTime=e[r].expireTime.split(" ")[1]);return e},buy:function(t){e.showToast({title:"加载中",icon:"loading"}),this.getWxPayById(t.adminOrderId)},getWxPayById:function(t){var n=this;r.globalData.getWxPaymentSignature({outTradeNo:t}).then((function(e){n.wxPayment(JSON.parse(e.data))})).catch((function(t){e.showToast({title:t.message,icon:"error"})}))},wxPayment:function(t){var r=this;e.requestPayment({provider:"wxpay",timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.packageStr,signType:t.signType,paySign:t.paySign,success:function(t){e.showToast({title:"支付成功",icon:"success"}),e.navigateTo({url:"/pages/allOrder/allOrder?curr=2&userId="+r.userInfo.id})},fail:function(t){e.showToast({title:"支付失败",icon:"error"})}})},confirmReceipt:function(t){var n=this;r.globalData.confirmReceipt({orderId:t}).then((function(e){n.curr=4})).catch((function(t){e.showToast({title:t.message,icon:"error"})}))}},onLoad:function(t){this.userInfo=e.getStorageSync("userInfo"),t.curr?this.curr=t.curr:this.getAllOrder()}};t.default=n}).call(this,r(2)["default"])},269:function(e,t,r){"use strict";r.r(t);var n=r(270),l=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=l.a},270:function(e,t,r){}},[[263,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/allOrder/allOrder.js.map