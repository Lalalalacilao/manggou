(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/release/release"],{349:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var i=o(n(350));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},350:function(e,t,n){"use strict";n.r(t);var o=n(351),i=n(353);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n(355);var a,s=n(35),u=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);u.options.__file="pages/release/release.vue",t["default"]=u.exports},351:function(e,t,n){"use strict";n.r(t);var o=n(352);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},352:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.flag=!1})},r=!1,a=[];i._withStripped=!0},353:function(e,t,n){"use strict";n.r(t);var o=n(354),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},354:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=getApp(),o={data:function(){return{type:"admin",position:"xx街道",uploadPreviewImage:[],intr:"",title:"",price:"0.00",freight:"0.00",flag:!0}},methods:{close:function(){e.navigateBack({delta:1})},add:function(){var t=this.title.trim(),o=this.intr.trim(),i=e.getStorageSync("userInfo");if("user"===this.type){if(!o)return void e.showToast({title:"请输入文字",icon:"none"});if(0===this.uploadPreviewImage.length)return void e.showToast({title:"上传图片会更快卖出哦",icon:"none"});n.globalData.addCommunity({introduction:o,imgs:JSON.stringify(this.uploadPreviewImage),userId:i.id,userName:i.userName,userAvatar:i.userAvatar}).then((function(t){e.switchTab({url:"/pages/forum/forum"})})).catch((function(t){e.showToast({title:t.message,icon:"error"})}))}else{var r=+this.price,a=parseFloat(this.freight);if(!t)return void e.showToast({title:"请输入商品标题",icon:"none"});if(!o)return void e.showToast({title:"请输入商品介绍",icon:"none"});if(0===this.uploadPreviewImage.length)return void e.showToast({title:"上传图片会更快卖出哦",icon:"none"});if(!r||r<0)return void e.showToast({title:"请输入正确的价格",icon:"none"});if(a<0)return void e.showToast({title:"请输入正确的运费",icon:"none"});n.globalData.addGoods({goodsName:this.title,introduction:this.intr,imgUrl:JSON.stringify(this.uploadPreviewImage),price:parseInt(100*this.price),userId:i.id,userAvatar:i.userAvatar,userName:i.userName,transportPrice:a}).then((function(t){e.showToast({title:"发布成功",icon:"none"}),e.switchTab({url:"/pages/index/index"})})).catch((function(t){e.showToast({title:t.message,icon:"error"})}))}},uploadImage:function(){var t=this;e.showLoading({title:"上传中"}),e.chooseImage({count:6,sizeType:["original","compressed"],sourceType:["album"],success:function(e){console.log("选择成功",e),t.imageUpload(e)},fail:function(t){e.hideLoading(),console.log(t),e.showToast({title:"图片选择失败",icon:"error"})}})},imageUpload:function(t){var n=this,o=0;t.tempFiles.forEach((function(t){e.uploadFile({url:"https://www.ydtloan.com/tos/uploadFiles",files:t,filePath:t.path,name:"files",header:{token:e.getStorageSync("token"),"content-type":"multipart/form-data"},success:function(t){200===t.statusCode?(e.showToast({title:"上传成功"}),n.uploadPreviewImage.push(JSON.parse(t.data).urls),o++):e.showToast({title:JSON.parse(t.data).error,icon:"error"})},fail:function(t){e.showToast({title:t.message,icon:"error"})}})})),t.tempFiles.length===o&&e.hideLoading()},deteleThisImg:function(t){var n=this;e.showModal({title:"提示",content:"确定删除此图片？",success:function(){console.log("确定删除"),n.uploadPreviewImage.splice(t,1),console.log(n.uploadPreviewImage)}})}},onLoad:function(e){this.type=e.type}};t.default=o}).call(this,n(2)["default"])},355:function(e,t,n){"use strict";n.r(t);var o=n(356),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},356:function(e,t,n){}},[[349,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/release/release.js.map