(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/release/release"],{223:function(e,t,n){"use strict";(function(e,t){var i=n(4);n(26);i(n(25));var o=i(n(224));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},224:function(e,t,n){"use strict";n.r(t);var i=n(225),o=n(227);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n(229);var a,s=n(35),u=Object(s["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],a);u.options.__file="pages/release/release.vue",t["default"]=u.exports},225:function(e,t,n){"use strict";n.r(t);var i=n(226);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},226:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];o._withStripped=!0},227:function(e,t,n){"use strict";n.r(t);var i=n(228),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},228:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=getApp(),i={data:function(){return{type:"admin",position:"xx街道",uploadPreviewImage:[],intr:"",title:"",price:"0.00"}},methods:{close:function(){e.navigateBack({delta:1})},add:function(){var t=this.title.trim(),i=this.intr.trim(),o=e.getStorageSync("userInfo");if("user"===this.type){if(!i)return void e.showToast({title:"请输入文字",icon:"none"});if(0===this.uploadPreviewImage.length)return void e.showToast({title:"上传图片会更快卖出哦",icon:"none"});n.globalData.addCommunity({introduction:this.intr,imgs:JSON.stringify(this.uploadPreviewImage),userId:o.id,userName:o.userName,userAvatar:o.userAvatar}).then((function(t){e.switchTab({url:"/pages/forum/forum"})})).catch((function(t){e.showToast({title:t.message,icon:"error"})}))}else{var r=+this.price;if(!t)return void e.showToast({title:"请输入商品标题",icon:"none"});if(!i)return void e.showToast({title:"请输入商品介绍",icon:"none"});if(0===this.uploadPreviewImage.length)return void e.showToast({title:"上传图片会更快卖出哦",icon:"none"});if(!r||r<0)return void e.showToast({title:"请输入正确的价格",icon:"none"});n.globalData.addGoods({goodsName:this.title,introduction:this.intr,imgUrl:JSON.stringify(this.uploadPreviewImage),price:parseInt(100*this.price),userId:o.id,userAvatar:o.userAvatar,userName:o.userName}).then((function(t){e.showToast({title:"发布成功",icon:"none"}),e.switchTab({url:"/pages/index/index"})})).catch((function(t){e.showToast({title:t.message,icon:"error"})}))}},uploadImage:function(){var t=this;e.chooseImage({count:6,sizeType:["original","compressed"],sourceType:["album"],success:function(n){console.log(n),e.uploadFile({url:"https://www.ydtloan.com/tos/uploadFile",files:n.tempFiles,filePath:n.tempFilePaths[0],name:"file",header:{token:e.getStorageSync("token")},success:function(e){console.log(e),t.uploadPreviewImage.push(JSON.parse(e.data).url)},fail:function(t){e.showToast({title:t.message,icon:"error"})}})},fail:function(e){console.log(e)}})}},onLoad:function(e){this.type=e.type}};t.default=i}).call(this,n(2)["default"])},229:function(e,t,n){"use strict";n.r(t);var i=n(230),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=o.a},230:function(e,t,n){}},[[223,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/release/release.js.map